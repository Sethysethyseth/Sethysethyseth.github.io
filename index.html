const media = [ /* your same media array stays EXACTLY as you already have it */ ];

let order = [];
let index = 0;

function shuffleOrder() {
  order = [...Array(media.length).keys()]; // [0,1,2,...]
  for (let i = order.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [order[i], order[j]] = [order[j], order[i]];
  }
  index = 0;
}

function showRandom() {
  const viewer = document.getElementById("viewer");
  viewer.innerHTML = "";

  if (order.length === 0 || index >= order.length) {
    shuffleOrder();
  }

  const item = media[order[index]];
  index++;

  if (item.type === "image") {
    const img = document.createElement("img");
    img.src = item.src;
    img.alt = "Dude look at this!!!";
    viewer.appendChild(img);
  } else {
    const vid = document.createElement("video");
    vid.src = item.src;
    vid.autoplay = true;
    vid.loop = true;
    vid.muted = true;
    vid.controls = true;
    viewer.appendChild(vid);
  }
}

document.addEventListener("DOMContentLoaded", () => {
  shuffleOrder();
  showRandom();
  document.getElementById("newBtn").addEventListener("click", showRandom);
});

